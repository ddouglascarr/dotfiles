#!/bin/bash
set -o nounset 

source ~/.bashrc
HOME_DIR=/home/daniel
IVET_DIR=/src/ivet-mobile
ROOSET_DIR=/src/rooset

function send-workon-edrolo {
  window_num=$@
  tmux send-keys -t edrolo:${window_num} "workon edrolo" Enter
}

tmux has-session -t edrolo &> /dev/null
if [ $? != 0 ]
then
  tmux new-session -s edrolo -n 'vi-fend' -d
  send-workon-edrolo 0
  tmux send-keys -t edrolo:0 "cd tod_django/react" Enter

  tmux new-window -n 'vi-bend' -t edrolo:1 
  send-workon-edrolo 'vi-bend'

  tmux new-window -n 'manage' -t edrolo:2
  send-workon-edrolo 'manage'

  tmux split-window -h -t edrolo:2
  send-workon-edrolo 'manage'

  tmux split-window -v -t edrolo:2
  send-workon-edrolo 'manage'
  tmux send-keys -t edrolo:2 "cd tod_django/react" Enter

  tmux new-window -n "dev-1" -t edrolo:3
  send-workon-edrolo "dev-1"
  
  tmux new-window -n "dev-2" -t edrolo:4 
  send-workon-edrolo "dev-2"
  
  tmux new-window -n "docker" -t edrolo:5 
  send-workon-edrolo "docker"
  tmux send-keys -t edrolo:5 "cd ../../edrolo-tmp/infrastructure/local" Enter

fi
